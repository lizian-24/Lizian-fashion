<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Lizian Fashion</title>

<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fff; color:#222; }
header { background:black; color:pink; padding:15px 20px; display:flex; align-items:center; }
header img { height:60px; margin-right:15px; }
header h1 { font-size:26px; letter-spacing:2px; margin:0; }
nav { margin-left:auto; }
nav a, nav button { padding:10px 14px; margin-left:10px; cursor:pointer; border:none; border-radius:5px; text-decoration:none; color:inherit; background:transparent; }
.hero { background-image: url('images/hero.jpg'); background-size:cover; background-position:center; height:60vh; display:flex; align-items:center; justify-content:center; flex-direction:column; color:black; text-shadow:0 0 10px black; }
.hero h1 { font-size:40px; margin:0; }
.hero p { font-size:18px; margin-top:8px; }
.btn { margin-top:12px; padding:10px 18px; background:white; color:black; font-weight:bold; border-radius:6px; text-decoration:none; transition:0.3s; cursor:pointer; }
.btn:hover { background:#ddd; }
.section { padding:30px 20px; text-align:center; }
.products { display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:18px; padding:20px; }
.product-card { border:1px solid #ddd; border-radius:10px; overflow:hidden; background:white; display:flex; flex-direction:column; }
.product-card img { width:100%; height:260px; object-fit:cover; }
.product-card p, .product-card h3 { padding:10px; font-weight:bold; margin:0; }
.product-card .actions { padding:10px; display:flex; gap:8px; justify-content:space-between; align-items:center; flex-wrap:wrap; }
#cart { padding:20px; background:#f9f9f9; margin-top:30px; border-top:2px solid #ddd; }
#cart ul { list-style:none; padding:0; }
#cart li { margin-bottom:10px; }
footer { background:black; color:pink; padding:15px; text-align:center; margin-top:30px; }
.small { font-size:13px; color:#555; cursor:pointer; }
.size-popup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; border:2px solid #333; padding:20px; z-index:1000; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.5); max-width:350px; }
.size-popup table { width:100%; border-collapse:collapse; margin-top:10px; }
.size-popup th, .size-popup td { border:1px solid #ddd; padding:8px; text-align:center; }
.size-popup th { background:#f0f0f0; }
.size-popup button { margin-top:12px; padding:6px 12px; border:none; background:#333; color:white; border-radius:5px; cursor:pointer; }
.overlay { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:999; }
</style>
</head>

<body>
<header>
<img src="images/logo.png" alt="Lizian Fashion Logo">
<h1>Lizian Fashion</h1>
<nav>
<a href="index.html">Home</a>
<a href="checkout.html">Checkout</a>
<a href="review.html">Reviews</a>
<button onclick="document.getElementById('cart').scrollIntoView()">Cart</button>
</nav>
</header>

<section class="hero">
<h1>Handmade • Custom • Unique</h1>
<p>Designed by Lizian — created with passion.</p>
<button class="btn" onclick="document.getElementById('products').scrollIntoView({behavior:'smooth'})">Shop My Designs</button>
</section>

<section class="section" id="productsSection">
<h2>Featured Designs</h2>

<!-- Search and Category Filter -->
<div style="margin-bottom:15px;">
  <input type="text" id="searchInput" placeholder="Search products..." style="padding:8px; width:60%; max-width:300px; border:1px solid #ccc; border-radius:5px;">
  
  <select id="categoryFilter" style="padding:8px; margin-left:10px; border:1px solid #ccc; border-radius:5px;">
    <option value="All">All Categories</option>
    <option value="Dress">Dress</option>
    <option value="Skirts">Skirts</option>
    <option value="Suits">Suits</option>
    <option value="Bags">Bags</option>
    <option value="Jewellery">Jewellery</option>
    <option value="Accessories">Accessories</option>
  </select>
</div>

<div class="products" id="products"></div>
</section>

<section id="cart">
<h2>Your Cart</h2>
<ul id="cart-items"></ul>
<div class="small">Total: KES <span id="cart-total">0</span></div>
<div style="margin-top:12px">
<button onclick="window.location.href='checkout.html'">Go to Checkout</button>
</div>
</section>

<div class="overlay" id="overlay"></div>

<div class="size-popup" id="sizePopup">
<h3 id="sizePopupTitle">Size Chart</h3>
<table id="sizePopupTable">
<tr><th>Size</th><th>Bust (in)</th><th>Waist (in)</th><th>Hip (in)</th><th>Length (in)</th></tr>
</table>
<button onclick="closeSizeChart()">Close</button>
</div>

<footer>© 2025 Lizian Fashion — All Rights Reserved</footer>

<script>
// GLOBAL SLIDER DATA
let sliderData = {};

// CART
let cart = JSON.parse(localStorage.getItem('cart')) || [];
function saveCart() { localStorage.setItem('cart', JSON.stringify(cart)); }
function displayCart() {
  const cartList = document.getElementById('cart-items');
  cartList.innerHTML = '';
  let total = 0;
  cart.forEach((c, i) => {
    const itemTotal = c.price * c.qty;
    total += itemTotal;
    cartList.innerHTML += `<li>${c.name} (${c.size}, ${c.color}) x${c.qty} - KES ${itemTotal} 
      <button onclick="removeFromCart(${i})">Remove</button></li>`;
  });
  document.getElementById('cart-total').textContent = total;
}
function addToCart(name, price) {
  const size = document.getElementById(`size-${name}`).value;
  const color = document.getElementById(`color-${name}`).value;
  const qty = Number(document.getElementById(`qty-${name}`).value);
  cart.push({ name, price, size, color, qty });
  saveCart();
  displayCart();
  alert(`${name} (${size}, ${color}) x${qty} added to cart!`);
}
function removeFromCart(index) { cart.splice(index, 1); saveCart(); displayCart(); }

// SIZE CHART
function openSizeChart(productName) {
  const table = document.getElementById('sizePopupTable');
  table.innerHTML =
    '<tr><th>Size</th><th>Bust</th><th>Waist</th><th>Hip</th><th>Length</th></tr>' +
    '<tr><td>S</td><td>34-36</td><td>28-30</td><td>36-38</td><td>40</td></tr>' +
    '<tr><td>M</td><td>36-38</td><td>30-32</td><td>38-40</td><td>41</td></tr>' +
    '<tr><td>L</td><td>38-40</td><td>32-34</td><td>40-42</td><td>42</td></tr>' +
    '<tr><td>XL</td><td>40-43</td><td>34-37</td><td>42-45</td><td>43</td></tr>';
  document.getElementById('sizePopupTitle').textContent = productName + ' - Size Chart';
  document.getElementById('overlay').style.display = 'block';
  document.getElementById('sizePopup').style.display = 'block';
}
function closeSizeChart() {
  document.getElementById('overlay').style.display = 'none';
  document.getElementById('sizePopup').style.display = 'none';
}

// --- IMAGE SLIDER LOGIC ---
function slideNext(id) {
  const data = sliderData[id];
  data.current = (data.current + 1) % data.images.length;
  document.getElementById(`slider-${id}`).src = data.images[data.current];
}
function slidePrev(id) {
  const data = sliderData[id];
  data.current = (data.current - 1 + data.images.length) % data.images.length;
  document.getElementById(`slider-${id}`).src = data.images[data.current];
}

// --- PRODUCTS LOAD & FILTER ---
const searchInput = document.getElementById('searchInput');
const categoryFilter = document.getElementById('categoryFilter');

async function loadProductsFiltered() {
  try {
    const res = await fetch('products.json');
    const products = await res.json();
    const filtered = products.filter(p => {
      const matchesSearch = p.name.toLowerCase().includes(searchInput.value.toLowerCase());
      const matchesCategory = categoryFilter.value === 'All' || p.category === categoryFilter.value;
      return matchesSearch && matchesCategory;
    });
    displayProducts(filtered);
  } catch(err) {
    console.error(err);
    document.getElementById('products').innerHTML = "<p style='color:red;text-align:center;'>Failed to load products.</p>";
  }
}

function displayProducts(products) {
  const container = document.getElementById('products');
  container.innerHTML = '';
  products.forEach((product, index) => {
    let sizeOptions = product.sizes.map(s => `<option>${s}</option>`).join('');
    let colorOptions = product.colors.map(c => `<option>${c}</option>`).join('');
    const images = product.images || [product.image];

    container.innerHTML += `
      <div class="product-card">
        <div style="position:relative; width:100%; height:260px; overflow:hidden;">
          <img id="slider-${index}" src="${images[0]}" style="width:100%; height:260px; object-fit:cover;">
          <button onclick="slidePrev(${index})" style="position:absolute; top:50%; left:10px; transform:translateY(-50%); background:black; color:white; border:none; padding:6px 10px; border-radius:5px; cursor:pointer; opacity:0.7;">❮</button>
          <button onclick="slideNext(${index})" style="position:absolute; top:50%; right:10px; transform:translateY(-50%); background:black; color:white; border:none; padding:6px 10px; border-radius:5px; cursor:pointer; opacity:0.7;">❯</button>
        </div>
        <h3>${product.name}</h3>
        <p>Price: KES ${product.price}</p>
        <div class="actions">
          <select id="size-${product.name}">${sizeOptions}</select>
          <select id="color-${product.name}">${colorOptions}</select>
          <select id="qty-${product.name}">
            <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
          </select>
          <button onclick="addToCart('${product.name}', ${product.price})">Add</button>
          <span class="small" onclick="openSizeChart('${product.name}')">View Size Chart</span>
        </div>
      </div>
    `;

    sliderData[index] = { images: images, current: 0 };
  });
}

// Listen for search & category changes
searchInput.addEventListener('input', loadProductsFiltered);
categoryFilter.addEventListener('change', loadProductsFiltered);

// Initial load
loadProductsFiltered();
displayCart();
</script>

</body>
      </html>

